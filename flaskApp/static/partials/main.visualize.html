<div layout="column">

	<div layout="row" layout-align="center" layout-padding="5">
		<div flex="60" class="md-whiteframe-z1">
			<md-radio-group layout="row" layout-align="center" ng-model="selectedChartType" ng-change="userDidSelectChartType(selectedChartType)">
				<md-radio-button ng-repeat="chartType in chartTypes" value="{{chartType}}">
					{{chartType}}
				</md-radio-button>
			</md-radio-group>
		</div>
	</div>

	<div layout="row" layout-align="center" ng-show="shouldShowColumnPickers" layout-padding="5">
		<div flex="60" layout="column" class="md-whiteframe-z1" layout-padding="5" >
			<md-input-container>
				<label>X-axis</label>
				<md-chips ng-model="xAxisColumns" ng-change="console.log('whatsup')" md-require-match="true">
					<md-autocomplete
						md-search-text="xAxisSearchText"
						md-items="column in querySearch(allowedXAxisColumns, xAxisSearchText)"
						md-no-cache="true"
						placeholder="type to select column"
						id="xAxisColumnAutocomplete">
						<span md-highlight-text="xAxisSearchText">{{column}}</span>
						<md-not-found>
							No matching columns
						</md-not-found>
					</md-autocomplete>

					<md-chip-template>
						<strong>{{$chip}}</strong>
					</md-chip-template>
				</md-chips>
			</md-input-container>
			
			<md-input-container ng-show="shouldShowPickerY">
				<label>Y-axis</label>
				<md-chips ng-model="yAxisColumns" ng-change="userDidChangeYAxisColumns(yAxisColumns)" md-require-match="true">
					<md-autocomplete
					md-search-text="yAxisSearchText"
					md-items="column in querySearch(allowedYAxisColumns, yAxisSearchText)"
					md-no-cache="true"
					placeholder="{{yAxisColumnsPlaceholder}}"
					id="yAxisColumnAutocomplete">
						<span md-highlight-text="yAxisSearchText">{{column}}</span>
						<md-not-found>
							No matching columns
						</md-not-found>
					</md-autocomplete>

					<md-chip-template>
						<strong>{{$chip}}</strong>
					</md-chip-template>
				</md-chips>
			</md-input-container>

			<md-input-container ng-show="selectedChartType == 'Histogram'">
				<label>Number of Bins</label>
				<input min="0" ng-model="histogramBins" ng-change="userDidChangeHistogramBins(histogramBins)" placeholder="Auto" min="1" step="1" type="number" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
			</md-input-container>

			<md-input-container ng-show="selectedChartType == 'Frequency'">
				<label>Top <em>n</em> Occurrences</label>
				<input type="number" min="1" max="50" step="1" placeholder="50" ng-model="frequencyCutoff" ng-change="userDidChangeFrequencyCutoff(frequencyCutoff)" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
				<md-checkbox ng-show="frequencyShowUseWords" ng-change="userDidChangeFrequencyUserWords(frequencyShowUseWords)" ng-model="frequencyUseWords" aria-label="Use word frequencies">Use word frequencies</md-checkbox>
			</md-input-container>

			<h4 class="md-title" ng-show="axis">Window Settings</h4>
			<div layout="row" ng-show="axis">
				<span ng-if="selectedChartType != 'Time Series'">
					<md-input-container>
						<label>X<sub>start</sub></label>
						<input type="number" ng-model="axis.x.start" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
					</md-input-container>
				</span>
				<span ng-show="selectedChartType == 'Time Series'">
					<md-input-container>
						<label>X<sub>start</sub></label>
						<input id="xAxisStartDate" ng-model="axis.x.start" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
					</md-input-container>
				</span>
				
				<span ng-if="selectedChartType != 'Time Series'">
					<md-input-container>
						<label>X<sub>end</sub></label>
						<input type="number" ng-model="axis.x.end" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
					</md-input-container>
				</span>
				<span ng-show="selectedChartType == 'Time Series'">
					<md-input-container>
						<label>X<sub>end</sub></label>
						<input id="xAxisEndDate" ng-model="axis.x.end" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
					</md-input-container>
				</span>

				<md-input-container>
					<label>Y<sub>start</sub></label>
					<input type="number" ng-model="axis.y.start" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
				</md-input-container>
				<md-input-container>
					<label>Y<sub>end</sub></label>
					<input type="number" ng-model="axis.y.end" ng-change="userChangedAxisSettings()" ng-model-options="{ updateOn: 'default blur', debounce: { 'default': 250, 'blur': 0 } }"></input>
				</md-input-container>
			</div>
		</div>
	</div>

	<div layout="row" layout-align="center" layout-padding="5" ng-show="shouldShowChart">
		<div flex="60" class="md-whiteframe-z1" layout="column" layout-align="center" layout-padding="5">
			<!--<div id="plotlyChart" style='width:800px;height:600px;background-color:white'></div>-->
			<img layout-align="center" id="staticChart" style="max-width:800px;max-height:600px;background-color:black;display:block;" ng-src="{{ staticChartData }}"></img>
		</div>
	</div>

</div>